countyLocation = as.character(df1$County.Location)
longLat1 = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix1 = sapply(longLat1, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix1 = apply(longLatMatrix1,2, FUN=as.numeric)
df1$county.long = longLatMatrix1[1, ]
df1$county.lat = longLatMatrix1[2, ]
df1
df <- read.csv('water_lead.csv')
df1 <- head(df, 4)
schoolLocation = as.character(df1$School.Location)
countyLocation = as.character(df1$County.Location)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df1$school.long = longLatMatrix[1, ]
df1$school.lat = longLatMatrix[2, ]
longLat1 = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix1 = sapply(longLat1, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix1 = apply(longLatMatrix1,2, FUN=as.numeric)
df1$county.long = longLatMatrix1[1, ]
df1$county.lat = longLatMatrix1[2, ]
df1
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
head(df)
df1
lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]'))
lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
add
df1$address = add
df1
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
add
add[1]
df1
add
add[1]
add[2]
add[3]
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
add
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
add
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
add
add
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = address
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
head(df)
df1
df[-c('address')]
df1[-c(address)]
colnames()
colnames(df1)
df1[-25]
df
head(df)
colnames(df)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = address
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'ny_ps_water_lead.csv', row.names = FALSE)
source('~/NYCDS10/shiny_project/preprocessing.R')
source('~/NYCDS10/shiny_project/preprocessing.R')
rm(list=ls())
rm(list=ls())
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = address
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
head(df)
write.csv(df, 'ny_ps_water_lead.csv', row.names = FALSE)
write.csv(df, 'nysPSwaterLead.csv', row.names = FALSE)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'ddd.csv', row.names = FALSE)
address
unlist(address)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'ddd.csv', row.names = FALSE)
head(df)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
head(df)
dd <- read.csv('nys_ps_water_lead.csv')
head(dd)
rm(list=ls())
df <- read.csv('nys_ps_water_lead.csv')
head(df)
View(df)
tolower('FFee')
tolower(c('FFee', 'lLkU'))
colnames(df) <- tolower(colnames(df))
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
df <- read.csv('nys_ps_water_lead.csv')
head(df)
colnames(df)
View(df)
ls()
rm(address)
rm(longLat)
rm(list = ls())
rm(list = ls())
df <- read.csv('nys_ps_water_lead.csv')
d<- read.csv('~/waterlead.csv')
head(d)
rm(list = ls())
rm(list = ls())
df <- read.csv('./nys_ps_water_lead.csv')
ls()
head(df)
shiny::runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
head(df)
ls()
rm(list = ls())
ls()
df <- read.csv('./nys_ps_water_lead.csv')
colnames(df)
View(df)
library(dplyr)
countyList <- unique(df$county)
districtList <- unique(df$school.district)
class(countyList)
head(countyList)
countyList[1]
countyList[2]
length(countyList)
length(districtList)
head(df)
df1
df1 = head(df,4)
df1
df1$above15 = df1$outlet.greater.15ppb/df1$outlet.num
df1
colnames(df1)
df <- read.csv('water_lead.csv')
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
head(df)
head(df,2)
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
rm
rm(list = ls())
df <- read.csv('water_lead.csv')
head(df, 2)
colnames(df)
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
df <- read.csv('./nys_ps_water_lead.csv')
head(df)
shiny::runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
schoolList <- unique(df$school)
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
shiny::runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
head(df)
df1=head(df)
df['county.long']
df1['county.long']
class(df1['county.long'])
df1
df1[school.state == 'NY', 'school.district']
df1[df1$school.state == 'NY', 'school.district']
class(df1[df1$school.state == 'NY', 'school.district'])
class(df1[df1$school.state == 'NY', 'county.long'])
class(df1['county.long'])
class(df1[df1$school.state == 'NY', c('county.long')])
class(df1[df1$school.state == 'NY', c('county.long', "county")])
df1[df1$school.state == 'NY', c('county.long', "county")]
df1[df1$school.state == 'NY', c('county.long', "county")]$county
df1[df1$school.state == 'NY', c('county.long', "county")]$county.long
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
rm(list=ls())
shiny::runApp('~/git_proj/shiny_proj')
ls()
rm(list=ls())
ls()
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
shiny::runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
colnames(df1)
colnames(df)
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
colnames(df)
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.lat = longLatMatrix[1, ]
df$school.long = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.lat = longLatMatrix[1, ]
df$county.long = longLatMatrix[2, ]
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
setwd('~/nycds10/shiny_project/waterlead/')
df <- read.csv('nys_ps_water_lead.csv')
countyList <- unique(df$county)
districtList <- unique(df$school.district)
schoolList <- unique(df$school)
long = df$school.long
lat = df$school.lat
runApp()
runApp()
df1
head(df,2)
rm(list=ls())
setwd('~/nycds10/shiny_project/waterlead/')
df <- read.csv('nys_ps_water_lead.csv')
head(df, 2)
df <- read.csv('water_lead.csv')
setwd('~/nycds10/shiny_project/')
df <- read.csv('water_lead.csv')
head(df,2)
colnames(df)
colnames(df) <- tolower(colnames(df))
colnames(df)
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
longLatMatrix[1,]
longLatMatrix[1,1:2]
longLatMatrix[,1:2]
longLatMatrix[2,1:2]
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.lat = longLatMatrix[1, ]
df$school.long = longLatMatrix[2, ]
head(df,2)
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.lat = longLatMatrix[1, ]
df$county.long = longLatMatrix[2, ]
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
write.csv(df, './waterLead/nys_ps_water_lead.csv', row.names = FALSE)
setwd('~/nycds10/shiny_project/waterlead/')
df <- read.csv('nys_ps_water_lead.csv')
head(df,2)
countyList <- unique(df$county)
districtList <- unique(df$school.district)
schoolList <- unique(df$school)
long = df$school.long
lat = df$school.lat
runApp()
runApp()
runApp()
colnames(df)
dtData <- df[c(1,2,3,9,26)]
head(dtData)
runApp()
