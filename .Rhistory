df1$school.long = longLatMatrix[1, ]
df1$school.lat = longLatMatrix[2, ]
countyLocation = as.character(df1$County.Location)
longLat1 = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix1 = sapply(longLat1, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix1 = apply(longLatMatrix1,2, FUN=as.numeric)
df1$county.long = longLatMatrix1[1, ]
df1$county.lat = longLatMatrix1[2, ]
df1
df <- read.csv('water_lead.csv')
df1 <- head(df, 4)
schoolLocation = as.character(df1$School.Location)
countyLocation = as.character(df1$County.Location)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df1$school.long = longLatMatrix[1, ]
df1$school.lat = longLatMatrix[2, ]
longLat1 = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix1 = sapply(longLat1, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix1 = apply(longLatMatrix1,2, FUN=as.numeric)
df1$county.long = longLatMatrix1[1, ]
df1$county.lat = longLatMatrix1[2, ]
df1
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
head(df)
df1
lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]'))
lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
add
df1$address = add
df1
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
add
add[1]
df1
add
add[1]
add[2]
add[3]
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]])
add
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
add
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
add
add
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = address
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
add =lapply(as.character(df1$School.Location), function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
head(df)
df1
df[-c('address')]
df1[-c(address)]
colnames()
colnames(df1)
df1[-25]
df
head(df)
colnames(df)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = address
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'ny_ps_water_lead.csv', row.names = FALSE)
source('~/NYCDS10/shiny_project/preprocessing.R')
source('~/NYCDS10/shiny_project/preprocessing.R')
rm(list=ls())
rm(list=ls())
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = address
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
head(df)
write.csv(df, 'ny_ps_water_lead.csv', row.names = FALSE)
write.csv(df, 'nysPSwaterLead.csv', row.names = FALSE)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'ddd.csv', row.names = FALSE)
address
unlist(address)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address)
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'ddd.csv', row.names = FALSE)
head(df)
df <- read.csv('water_lead.csv')
schoolLocation = as.character(df$School.Location)
countyLocation = as.character(df$County.Location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
head(df)
dd <- read.csv('nys_ps_water_lead.csv')
head(dd)
rm(list=ls())
df <- read.csv('nys_ps_water_lead.csv')
head(df)
View(df)
tolower('FFee')
tolower(c('FFee', 'lLkU'))
colnames(df) <- tolower(colnames(df))
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
df <- read.csv('nys_ps_water_lead.csv')
head(df)
colnames(df)
View(df)
ls()
rm(address)
rm(longLat)
rm(list = ls())
rm(list = ls())
df <- read.csv('nys_ps_water_lead.csv')
d<- read.csv('~/waterlead.csv')
head(d)
rm(list = ls())
rm(list = ls())
df <- read.csv('./nys_ps_water_lead.csv')
ls()
head(df)
shiny::runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
head(df)
ls()
rm(list = ls())
ls()
df <- read.csv('./nys_ps_water_lead.csv')
colnames(df)
View(df)
library(dplyr)
countyList <- unique(df$county)
districtList <- unique(df$school.district)
class(countyList)
head(countyList)
countyList[1]
countyList[2]
length(countyList)
length(districtList)
head(df)
df1
df1 = head(df,4)
df1
df1$above15 = df1$outlet.greater.15ppb/df1$outlet.num
df1
colnames(df1)
df <- read.csv('water_lead.csv')
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
head(df)
head(df,2)
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
rm
rm(list = ls())
df <- read.csv('water_lead.csv')
head(df, 2)
colnames(df)
df <- read.csv('water_lead.csv')
colnames(df) <- tolower(colnames(df))
schoolLocation = as.character(df$school.location)
countyLocation = as.character(df$county.location)
address = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][1])
df$address = unlist(address) # need to unlist before write.csv()
longLat = lapply(schoolLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
options(digits = 16)
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$school.long = longLatMatrix[1, ]
df$school.lat = longLatMatrix[2, ]
longLat = lapply(countyLocation, function(x) strsplit(x, split = '[\\(\\)]')[[1]][2])
longLatMatrix = sapply(longLat, function(x) strsplit(x, split = ',')[[1]])
longLatMatrix = apply(longLatMatrix,2, FUN=as.numeric)
df$county.long = longLatMatrix[1, ]
df$county.lat = longLatMatrix[2, ]
df$above15.pct = df$outlet.greater.15ppb/df$outlet.num
write.csv(df, 'nys_ps_water_lead.csv', row.names = FALSE)
df <- read.csv('./nys_ps_water_lead.csv')
head(df)
shiny::runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
schoolList <- unique(df$school)
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
shiny::runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
head(df)
df1=head(df)
df['county.long']
df1['county.long']
class(df1['county.long'])
df1
df1[school.state == 'NY', 'school.district']
df1[df1$school.state == 'NY', 'school.district']
class(df1[df1$school.state == 'NY', 'school.district'])
class(df1[df1$school.state == 'NY', 'county.long'])
class(df1['county.long'])
class(df1[df1$school.state == 'NY', c('county.long')])
class(df1[df1$school.state == 'NY', c('county.long', "county")])
df1[df1$school.state == 'NY', c('county.long', "county")]
df1[df1$school.state == 'NY', c('county.long', "county")]$county
df1[df1$school.state == 'NY', c('county.long', "county")]$county.long
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('waterLead')
runApp('~/git_proj/shiny_proj')
rm(list=ls())
shiny::runApp('~/git_proj/shiny_proj')
ls()
rm(list=ls())
ls()
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
runApp('~/git_proj/shiny_proj')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
head(df)
library(leaflet)
library(maps)
leaflet() %>% addTiles() %>% # Add default OpenStreetMap map tiles
addMarkers(lng=-74.0059, lat=40.7128, popup="New York City")
runApp('~/NYCDS10/week3/2.leaflet/leaflet')
library(googleVis)
head(mtcars, n=10)
head(mtcars, n=10)
source('~/NYCDS10/week3/2.googleVIS/googVis.R')
colnames(df)
runApp('waterLead')
runApp('waterLead')
colnames(df)
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
head(df,2)
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
df1 = head(df, 2)
df1
df1$school + '\n' + df1$address
map(lambda x,y: x + ' ' + y, df1$school, df1$address)
map(lambda x,y: x + ' ' + y, df1$school, df1$address)
map(function( x,y) x + ' ' + y, df1$school, df1$address)
map(function( x,y) x + ' ' + y, df1$school, df1$address))
map(function( x,y) x + ' ' + y, df1$school, df1$address)
pase0(c(2,4,5), c(5,6,7))
paste0(c(2,4,5), c(5,6,7))
paste(c(2,4,5), c(5,6,7),sep = '\n' )
paste(df1$school, df1$address, sep = '\n')
labelData <- paste(df$school, df$address, sep = '\n')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
nycounties <- geojsonio::geojson_read("json/nycounties.geojson", what = "sp")
install.packages("geojsonio")
library(geojsonio)
nycounties <- geojsonio::geojson_read("json/nycounties.geojson", what = "sp")
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
nycounties <- geojsonio::geojson_read("json/nycounties.geojson", what = "sp")
getwd()
library(geojsonio)
nycounties <- geojsonio::geojson_read("json/nycounties.geojson", what = "sp")
nycounties <- geojsonio::geojson_read("gz_2010_us_050_00_500k.json", what = "sp")
getwd()
install.packages("rjson")
library(rjson)
counties <-fromJSON(file = "http://eric.clst.org/wupl/Stuff/gz_2010_us_050_00_500k.json")
head(counties)
getwd()
counties <-fromJSON(file = "http://eric.clst.org/wupl/Stuff/gz_2010_us_050_00_500k.json")
class(counties)
counties <-fromJSON(file = "http://eric.clst.org/wupl/Stuff/gz_2010_us_050_00_500k.json")
nycounties
nycounties
nycounties <- geojsonio::geojson_read(counties, what = "sp")
?map()
install.packages("maps")
rm(counties)
ls()
?map()
?map
map('county', 'iowa', fill = TRUE, col = palette())
library(maps)
map('county', 'iowa', fill = TRUE, col = palette())
map('county', 'newyork', fill = TRUE, col = palette())
map('county', 'new york', fill = TRUE, col = palette())
map('county', 'new york', fill = TRUE, col = palette())
map('county', 'iowa', fill = TRUE, col = palette())
ls()
map('county', 'iowa', fill = TRUE, col = palette())
map('county', 'new york', fill = TRUE, col = palette())
?map()
shiny::runApp('waterLead')
?heat.colors
length(countyList)
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
shiny::runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
runApp('waterLead')
